<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>2025 Philippines Calendar with Holidays</title>
<style>
  body {
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    margin: 20px;
    background-color: #f9f9f9;
    color: #333;
  }
  h1 {
    text-align: center;
    margin-bottom: 1rem;
  }
  .calendar-wrapper {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
  }
  .month {
    border: 1px solid #ccc;
    border-radius: 8px;
    background: white;
    width: 320px;
    padding: 10px;
    box-shadow: 1px 2px 6px rgba(0,0,0,0.1);
  }
  .month-name {
    text-align: center;
    font-size: 1.3rem;
    font-weight: bold;
    padding: 10px 0;
    border-bottom: 2px solid #0078D7;
    color: #0078D7;
  }
  table {
    width: 100%;
    border-collapse: collapse;
  }
  thead tr {
    background-color: #0078D7;
    color: white;
  }
  th, td {
    padding: 6px;
    text-align: center;
    border: 1px solid #ddd;
    font-size: 0.85rem;
  }
  .week-number {
    background-color: #e2e6f9;
    font-weight: bold;
    width: 25px;
  }
  /* Highlight holidays */
  .holiday {
    background-color: #ffdede;
    color: #b71c1c;
    cursor: pointer;
    position: relative;
  }
  .holiday:hover {
    background-color: #ffb3b3;
  }

  /* Tooltip or Popup style */
  .modal {
    display: none; 
    position: fixed; 
    z-index: 999;
    padding-top: 60px; 
    left: 0; top: 0;
    width: 100%; height: 100%; 
    overflow: auto; 
    background-color: rgba(0,0,0,0.4);
  }
  .modal-content {
    background-color: #fff;
    margin: auto;
    padding: 20px;
    border-radius: 10px;
    width: 90%;
    max-width: 500px;
    position: relative;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    text-align: center;
  }
  .modal-content img {
    max-width: 100%;
    height: auto;
    margin: 12px 0;
    border-radius: 6px;
  }
  .close-btn {
    color: #aaa;
    position: absolute;
    right: 15px;
    top: 10px;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
  }
  .close-btn:hover {
    color: black;
  }

  /* Scroll container for mobile */
  .calendar-wrapper {
    overflow-x: auto;
  }
</style>
</head>
<body>

<h1>Philippines 2025 Calendar with Regular Holidays</h1>

<div class="calendar-wrapper" id="calendar-wrapper">
  <!-- Months will be generated by JS -->
</div>

<!-- Modal for holiday details -->
<div id="holidayModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="modalTitle" aria-describedby="modalDescription">
  <div class="modal-content">
    <span class="close-btn" id="closeModal" role="button" aria-label="Close popup">&times;</span>
    <h2 id="modalTitle"></h2>
    <img id="modalImage" src="" alt="" />
    <p id="modalDescription"></p>
  </div>
</div>

<script>
// Philippines Common Regular Holidays in 2025
const holidays = {
  "2025-01-01": {
    name: "New Year's Day",
    description: "The first day of the year, celebrated nationwide.",
    image: "https://upload.wikimedia.org/wikipedia/commons/a/a0/New_Year_Fireworks.jpg"
  },
  "2025-04-09": {
    name: "Araw ng Kagitingan",
    description: "Day of Valor commemorates WWII heroism.",
    image: "https://upload.wikimedia.org/wikipedia/commons/9/97/Araw_ng_kagitingan_2022.jpeg"
  },
  "2025-05-01": {
    name: "Labor Day",
    description: "Celebrates workers and labor movement.",
    image: "https://upload.wikimedia.org/wikipedia/commons/0/00/Labor_Day_2021_March_in_Manila_11.jpg"
  },
  "2025-06-12": {
    name: "Independence Day",
    description: "Philippine Independence Day from Spain in 1898.",
    image: "https://upload.wikimedia.org/wikipedia/commons/9/99/Filipino_flag_raising_%28June_12%2C_2019%29.jpg"
  },
  "2025-08-25": {
    name: "National Heroes Day",
    description: "Honors the countryâ€™s heroes.",
    image: "https://upload.wikimedia.org/wikipedia/commons/d/d9/National_Heroes_Day_2017_Philippines_67.jpg"
  },
  "2025-11-01": {
    name: "All Saints' Day",
    description: "Remembering deceased loved ones.",
    image: "https://upload.wikimedia.org/wikipedia/commons/f/fe/All_Saints'_Day_lit_candles%2C_the_Philippines.jpg"
  },
  "2025-12-25": {
    name: "Christmas Day",
    description: "Celebration of Christmas in the Philippines.",
    image: "https://upload.wikimedia.org/wikipedia/commons/f/fb/Christmas_Day_2020%2C_Philippines.jpg"
  }
};

// Helper function: ISO week number calculation
function getWeekNumber(date) {
  // Copy date so don't modify original
  const target = new Date(date.valueOf());
  // Set to nearest Thursday: current date + 4 - current day number
  const dayNr = (date.getDay() + 6) % 7; // Mon=0, Sun=6
  target.setDate(target.getDate() - dayNr + 3);
  // January 4 is always in week 1
  const jan4 = new Date(target.getFullYear(),0,4);
  // Number of days between target date and jan4
  const dayDiff = (target - jan4) / 86400000;
  // Calculate week number
  return 1 + Math.floor(dayDiff / 7);
}

// Months data
const monthNames = [
  "January","February","March","April","May","June",
  "July","August","September","October","November","December"
];

const dayNames = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];

// Days in each month for 2025 (check leap year for Feb)
function daysInMonth(month, year) {
  return new Date(year, month + 1, 0).getDate();
}

// Build one month calendar as table HTML string
function buildMonth(year, month) {
  const monthName = monthNames[month];
  const daysCount = daysInMonth(month, year);
  
  // Start date of the month
  const firstDate = new Date(year, month, 1);
  // Get day of week (0=Sun, 1=Mon...); we want weeks to start on Monday so adjust:
  // We'll consider Monday=0 to Sunday=6 for alignment with dayNames
  let firstDayWeekday = (firstDate.getDay() + 6) % 7;

  // Prepare weeks array, each week holds 7 days or empty string if out of month range
  const weeks = [];
  let week = new Array(7).fill("");

  // Fill first week starting from 'firstDayWeekday'
  let day = 1;
  for(let i=firstDayWeekday; i < 7; i++) {
    week[i] = day++;
  }
  weeks.push(week);

  // Fill subsequent weeks until all days covered
  while(day <= daysCount) {
    week = new Array(7).fill("");
    for(let i=0; i<7 && day <= daysCount; i++) {
      week[i] = day++;
    }
    weeks.push(week);
  }

  // Build HTML table
  let html = `<div class="month" aria-label="${monthName} ${year} Calendar">
    <h3 class="month-name">${monthName} ${year}</h3>
    <table role="grid" aria-readonly="true">
    <thead>
      <tr>
        <th class="week-number" scope="col" aria-label="Week number">Wk</th>
        ${dayNames.map(day => `<th scope="col">${day}</th>`).join('')}
      </tr>
    </thead><tbody>`;

  weeks.forEach(weekDays => {
    // Determine the date of Monday in the week for week number calculation
    // Find first day with number or empty
    // Build a date for Monday of that week
    let mondayDate = null;
    for (let i = 0; i < 7; i++) {
      if (weekDays[i] !== "" && i === 0) {
        // Monday is the 1st day in our week (index 0)
        mondayDate = new Date(year, month, weekDays[i]);
        break;
      } else if (weekDays[i] !== "" && i > 0) {
        // Monday is before the first day with date; calculate offset
        // We compute the date for Monday by subtracting i days from the day
        mondayDate = new Date(year, month, weekDays[i] - i);
        break;
      }
    }
    if (!mondayDate) {
      // Edge case: no day with date? Then use first day of month
      mondayDate = new Date(year, month, 1);
    }
    const weekNumber = getWeekNumber(mondayDate);

    html += `<tr>
      <td class="week-number" aria-label="Week number ${weekNumber}">${weekNumber}</td>`;

    weekDays.forEach(dayNum => {
      if (dayNum === "") {
        html += `<td></td>`;
      } else {
        // Format date for holiday check YYYY-MM-DD
        const dayPadded = dayNum.toString().padStart(2,"0");
        const monthPadded = (month + 1).toString().padStart(2,"0");
        const dateISO = `${year}-${monthPadded}-${dayPadded}`;

        // Check if holiday
        if (holidays[dateISO]) {
          html += `<td tabindex="0" role="gridcell" class="holiday" data-date="${dateISO}" aria-label="${holidays[dateISO].name}. Click for details">${dayNum}</td>`;
        } else {
          html += `<td role="gridcell">${dayNum}</td>`;
        }
      }
    });
    html += `</tr>`;
  });

  html += "</tbody></table></div>";
  return html;
}

// Generate all months in 2025
const calendarWrapper = document.getElementById("calendar-wrapper");
for(let m=0; m<12; m++){
  calendarWrapper.innerHTML += buildMonth(2025,m);
}

// Modal Logic
const modal = document.getElementById("holidayModal");
const modalTitle = document.getElementById("modalTitle");
const modalDescription = document.getElementById("modalDescription");
const modalImage = document.getElementById("modalImage");
const closeModalBtn = document.getElementById("closeModal");

calendarWrapper.addEventListener("click", (e) => {
  // Check if clicked element is holiday day
  if(e.target.classList.contains("holiday")){
    const dataDate = e.target.getAttribute("data-date");
    if (dataDate && holidays[dataDate]){
      showModal(holidays[dataDate]);
    }
  }
});
calendarWrapper.addEventListener("keydown", (e) => {
  if(e.target.classList.contains("holiday") && (e.key === "Enter" || e.key === " ")){
    e.preventDefault();
    const dataDate = e.target.getAttribute("data-date");
    if (dataDate && holidays[dataDate]){
      showModal(holidays[dataDate]);
    }
  }
});

closeModalBtn.addEventListener("click", closeModal);

window.addEventListener("click", (event) => {
  if (event.target === modal) {
    closeModal();
  }
});

window.addEventListener("keydown", (e) => {
  if(e.key === "Escape" && modal.style.display === "block") {
    closeModal();
  }
});

function showModal(holiday) {
  modalTitle.textContent = holiday.name;
  modalDescription.textContent = holiday.description;
  modalImage.src = holiday.image;
  modalImage.alt = `${holiday.name} image`;
  modal.style.display = "block";
  modal.setAttribute("aria-hidden", "false");
  closeModalBtn.focus();
}

function closeModal() {
  modal.style.display = "none";
  modal.setAttribute("aria-hidden", "true");
  // Return focus to calendar
  calendarWrapper.querySelector(".holiday[data-date]")?.focus();
}
</script>

</body>
</html>